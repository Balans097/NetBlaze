# IMDB Reviews Scraper - –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –ø—Ä–∏–º–µ—Ä NimBrowser

> **–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ NimBrowser v1.0**

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–û–±–∑–æ—Ä](#–æ–±–∑–æ—Ä)
- [–î–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ–º—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#–¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ–º—ã–µ-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–∏–º–µ—Ä–∞](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–∏–º–µ—Ä–∞)
- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–∏-–∑–∞–ø—É—Å–∫)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-—Ä–µ—à–µ–Ω–∏—è)
- [–î–µ—Ç–∞–ª—å–Ω—ã–π —Ä–∞–∑–±–æ—Ä –∫–æ–¥–∞](#–¥–µ—Ç–∞–ª—å–Ω—ã–π-—Ä–∞–∑–±–æ—Ä-–∫–æ–¥–∞)
- [–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ](#–≤—ã—Ö–æ–¥–Ω—ã–µ-–¥–∞–Ω–Ω—ã–µ)
- [–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –ø—Ä–∏–º–µ—Ä–∞](#—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ-–ø—Ä–∏–º–µ—Ä–∞)

---

## üéØ –û–±–∑–æ—Ä

–≠—Ç–æ—Ç –ø—Ä–∏–º–µ—Ä –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç **–ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥** –∫ –≤–µ–±-—Å–∫—Ä–µ–π–ø–∏–Ω–≥—É —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º NimBrowser. –ú—ã —Å–æ–∑–¥–∞–ª–∏ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π —Å–∫—Ä–µ–π–ø–µ—Ä –æ—Ç–∑—ã–≤–æ–≤ IMDB, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏.

**–¶–µ–ª—å:** –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –æ—Ç–∑—ã–≤–æ–≤ –Ω–∞ —Ñ–∏–ª—å–º "Terminator 3: Rise of the Machines" (2003)  
**URL:** https://www.imdb.com/title/tt0181852/reviews

### –ß—Ç–æ –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è

```json
{
  "review_id": "rw1234567",
  "title": "Best action movie of 2002!",
  "rating": "9",
  "review_text": "This movie is absolutely fantastic! Matt Damon delivers...",
  "author": "JohnDoe",
  "author_url": "https://www.imdb.com/user/ur12345",
  "review_date": "15 January 2020",
  "helpful_count": "542 out of 678 found this helpful",
  "has_spoiler": false,
  "sentiment": "positive",
  "word_count": 42,
  "review_length": 245,
  "scraped_at": "2026-02-10T14:30:00"
}
```

---

## ‚ú® –î–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ–º—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### 1. CSS –°–µ–ª–µ–∫—Ç–æ—Ä—ã

#### –ë–∞–∑–æ–≤—ã–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã
```nim
# –ü–æ –∫–ª–∞—Å—Å—É
.css(".review-container")

# –ü–æ –∞—Ç—Ä–∏–±—É—Ç—É
.css("[data-review-id]")

# –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ
.css(".rating-other-user-rating span")
```

#### –°–ª–æ–∂–Ω—ã–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã
```nim
# –í–ª–æ–∂–µ–Ω–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
.css(".content .text.show-more__control")

# –ê—Ç—Ä–∏–±—É—Ç–Ω—ã–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã —Å data-*
.css("[data-key]")
```

### 2. XPath –ó–∞–ø—Ä–æ—Å—ã

```nim
# –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Ä–µ–π—Ç–∏–Ω–≥–∞
loader.addXPath("rating", 
  ".//span[@class='rating-other-user-rating']/span")
```

### 3. Response API

```nim
# Chainable –º–µ—Ç–æ–¥—ã
let reviews = response.css(".review-container").getall()

# –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∞—Ç—Ä–∏–±—É—Ç–æ–≤
let nextKey = response.css(".load-more-trigger").attrib("data-key")
```

### 4. ItemLoader —Å –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞–º–∏

```nim
# Input processor - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
proc cleanText(values: seq[string]): seq[string] =
  result = @[]
  for value in values:
    result.add normalizeWhitespace(value.strip())

# Output processor - –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è
proc takeFirst(values: seq[string]): string =
  for value in values:
    if value.strip().len > 0:
      return value
  return ""

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
loader.addCss("title", "a.title",
              inputProcessor = cleanText,
              outputProcessor = takeFirst)
```

### 5. Middleware —Å–∏—Å—Ç–µ–º–∞

```nim
# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤
type LoggingMiddleware = ref object of DownloaderMiddleware
  requestCount: int

method processRequest(m: LoggingMiddleware, ...) =
  m.requestCount += 1
  echo "REQUEST #", m.requestCount

# User-Agent
type UserAgentMiddleware = ref object of DownloaderMiddleware
  userAgent: string
```

### 6. Pipeline –æ–±—Ä–∞–±–æ—Ç–∫–∞

```nim
# –í–∞–ª–∏–¥–∞—Ü–∏—è
method processItem(p: ValidationPipeline, item: var Item): bool =
  if not item.hasKey("review_text"):
    return false  # –û—Ç–±—Ä–æ—Å–∏—Ç—å
  return true     # –°–æ—Ö—Ä–∞–Ω–∏—Ç—å

# –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è
method processItem(p: DuplicatesPipeline, item: var Item): bool =
  if reviewId in p.seenReviews:
    return false
  p.seenReviews.incl(reviewId)
  return true

# –û–±–æ–≥–∞—â–µ–Ω–∏–µ
method processItem(p: EnrichmentPipeline, item: var Item): bool =
  item["scraped_at"] = %($now())
  item["word_count"] = %(text.split().len)
  return true
```

### 7. –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞

```nim
proc scrapeAllPages(scraper: IMDBReviewsScraper) {.async.} =
  for page in 1..MAX_PAGES:
    let response = await fetchAsync(url)
    let reviews = await scrapePage(response)
    await sleepAsync(REQUEST_DELAY)
```

### 8. –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏

```nim
proc getNextPageUrl(response: Response): string =
  let nextButton = response.css(".load-more-trigger")
  if not nextButton.node.isNil:
    return REVIEWS_URL & "/_ajax?paginationKey=" & nextButton.attrib("data-key")
  return ""
```

### 9. –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã —ç–∫—Å–ø–æ—Ä—Ç–∞

```nim
# JSON
writeFile("reviews.json", $(%scraper.allReviews).pretty())

# JSON Lines
writeFile("reviews.jsonl", scraper.allReviews.toJsonLines())

# CSV
let csv = scraper.allReviews.toCsv(headers)
writeFile("reviews.csv", csv)
```

### 10. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –æ—Ç—á—ë—Ç—ã

```nim
type ScrapingStats = object
  requestsCount: int
  itemsScraped: int
  startTime: DateTime
  endTime: DateTime

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–¥—Å—á—ë—Ç –º–µ—Ç—Ä–∏–∫
scraper.stats.itemsScraped += 1
scraper.stats.finish()
```

---

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–∏–º–µ—Ä–∞

```
imdb_reviews_scraper.nim
‚îÇ
‚îú‚îÄ‚îÄ –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø
‚îÇ   ‚îú‚îÄ‚îÄ –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã (URL, –∑–∞–¥–µ—Ä–∂–∫–∏)
‚îÇ   ‚îî‚îÄ‚îÄ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∫—Ä–µ–π–ø–∏–Ω–≥–∞
‚îÇ
‚îú‚îÄ‚îÄ DATA PROCESSORS
‚îÇ   ‚îú‚îÄ‚îÄ cleanText()          - –û—á–∏—Å—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ extractRating()      - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ä–µ–π—Ç–∏–Ω–≥–∞
‚îÇ   ‚îú‚îÄ‚îÄ parseDate()          - –ü–∞—Ä—Å–∏–Ω–≥ –¥–∞—Ç
‚îÇ   ‚îú‚îÄ‚îÄ joinWithNewline()    - –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫
‚îÇ   ‚îî‚îÄ‚îÄ cleanUrl()           - –û–±—Ä–∞–±–æ—Ç–∫–∞ URL
‚îÇ
‚îú‚îÄ‚îÄ MIDDLEWARE
‚îÇ   ‚îú‚îÄ‚îÄ LoggingMiddleware    - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ UserAgentMiddleware  - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ User-Agent
‚îÇ
‚îú‚îÄ‚îÄ PIPELINES
‚îÇ   ‚îú‚îÄ‚îÄ ValidationPipeline   - –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ EnrichmentPipeline   - –û–±–æ–≥–∞—â–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îî‚îÄ‚îÄ DuplicatesPipeline   - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
‚îÇ
‚îú‚îÄ‚îÄ SCRAPER CLASS
‚îÇ   ‚îú‚îÄ‚îÄ newIMDBReviewsScraper()  - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ extractReviewData()      - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –æ—Ç–∑—ã–≤–∞
‚îÇ   ‚îú‚îÄ‚îÄ scrapePage()             - –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
‚îÇ   ‚îú‚îÄ‚îÄ scrapeAllPages()         - –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Å–∫—Ä–µ–π–ø–∏–Ω–≥–∞
‚îÇ   ‚îî‚îÄ‚îÄ getNextPageUrl()         - –ü–∞–≥–∏–Ω–∞—Ü–∏—è
‚îÇ
‚îú‚îÄ‚îÄ MOCK DATA
‚îÇ   ‚îî‚îÄ‚îÄ createMockResponse()     - –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
‚îÇ
‚îú‚îÄ‚îÄ EXPORT & REPORTING
‚îÇ   ‚îú‚îÄ‚îÄ exportResults()          - –≠–∫—Å–ø–æ—Ä—Ç –≤ —Ñ–∞–π–ª—ã
‚îÇ   ‚îú‚îÄ‚îÄ printStatistics()        - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
‚îÇ   ‚îî‚îÄ‚îÄ printSampleReviews()     - –ü—Ä–∏–º–µ—Ä—ã –æ—Ç–∑—ã–≤–æ–≤
‚îÇ
‚îî‚îÄ‚îÄ MAIN
    ‚îî‚îÄ‚îÄ main()                   - –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
```

---

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Nim 1.6.0 –∏–ª–∏ –≤—ã—à–µ
- NimBrowser –±–∏–±–ª–∏–æ—Ç–µ–∫–∞

### –ö–æ–º–ø–∏–ª—è—Ü–∏—è

```bash
nim c -d:release imdb_reviews_scraper.nim
```

### –ó–∞–ø—É—Å–∫

```bash
./imdb_reviews_scraper
```

### –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞

```
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë                                                                        ‚ïë
‚ïë              IMDB REVIEWS SCRAPER - NimBrowser Demo                    ‚ïë
‚ïë                                                                        ‚ïë
‚ïë  –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ NimBrowser v1.0                 ‚ïë
‚ïë                                                                        ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

‚úì Query cache enabled

‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
‚ïë PAGE 1 / 3
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
‚îÇ REQUEST #1
‚îÇ URL: https://www.imdb.com/title/tt0181852/reviews
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
‚ïë PARSING PAGE
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
Found 3 reviews on this page

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Review #1
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
  ‚Üí Extracting review data...
  ‚úì Review extracted
  [PIPELINE] Validating item...
  [PIPELINE] ‚úì Valid
  [PIPELINE] ‚úì Unique
  [PIPELINE] Enriching item...
  [PIPELINE] ‚úì Enriched
  ‚úì Review saved

...

‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
‚ïë SCRAPING STATISTICS
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

  üìä Total requests:      3
  üìù Reviews scraped:     9
  ‚è±Ô∏è  Duration:            0 seconds
  üéØ Success rate:        300.00%

  üìà RATINGS DISTRIBUTION:
     10/10: ‚ñà‚ñà‚ñà (3)
     9/10: ‚ñà‚ñà‚ñà (3)
     6/10: ‚ñà‚ñà‚ñà (3)

  üòä SENTIMENT ANALYSIS:
     Positive: 6
     Neutral: 3

  ‚úçÔ∏è  AVERAGE REVIEW LENGTH: 45 words
```

---

## üîß –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è

### –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   START     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Initialize Scraper ‚îÇ
‚îÇ  - Middleware       ‚îÇ
‚îÇ  - Pipelines        ‚îÇ
‚îÇ  - Stats            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  For each page:     ‚îÇ
‚îÇ                     ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ 1. Request    ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ Middleware    ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ          ‚îÇ          ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ 2. Fetch      ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ (async)       ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ          ‚îÇ          ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ 3. Response   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ Middleware    ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ          ‚îÇ          ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ 4. Parse      ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ Reviews       ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ          ‚îÇ          ‚îÇ
‚îÇ  ‚îÇ   For each    ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ   review:     ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ               ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ ‚îÇExtract  ‚îÇ   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ ‚îÇItemLoad.‚îÇ   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ      ‚îÇ        ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ ‚îÇPipeline ‚îÇ   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ ‚îÇ1:Valid. ‚îÇ   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ      ‚îÇ        ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ ‚îÇPipeline ‚îÇ   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ ‚îÇ2:Dedup  ‚îÇ   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ      ‚îÇ        ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ ‚îÇPipeline ‚îÇ   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ ‚îÇ3:Enrich ‚îÇ   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ      ‚îÇ        ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ ‚îÇ  Save   ‚îÇ   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ               ‚îÇ  ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ 5. Pagination ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ          ‚îÇ          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ
       ‚îå‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îê
       ‚îÇ More?  ‚îÇ
       ‚îî‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ No
           ‚ñº
   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
   ‚îÇ 6. Export     ‚îÇ
   ‚îÇ - JSON        ‚îÇ
   ‚îÇ - JSON Lines  ‚îÇ
   ‚îÇ - CSV         ‚îÇ
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ
           ‚ñº
   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
   ‚îÇ 7. Statistics ‚îÇ
   ‚îÇ & Reports     ‚îÇ
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ
           ‚ñº
      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
      ‚îÇ  DONE  ‚îÇ
      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –æ—Ç–∑—ã–≤–∞

```
Review HTML
    ‚îÇ
    ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  ItemLoader     ‚îÇ
‚îÇ  (—Å–æ–∑–¥–∞–Ω–∏–µ)     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ                                 ‚îÇ
    ‚ñº                                 ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                 ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ CSS        ‚îÇ                 ‚îÇ XPath        ‚îÇ
‚îÇ Selectors  ‚îÇ                 ‚îÇ Queries      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                 ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
      ‚îÇ                               ‚îÇ
      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                   ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ              ‚îÇ              ‚îÇ
    ‚ñº              ‚ñº              ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Input  ‚îÇ   ‚îÇ Process  ‚îÇ   ‚îÇ Output  ‚îÇ
‚îÇ Proc.  ‚îÇ‚îÄ‚îÄ‚ñ∂‚îÇ   Data   ‚îÇ‚îÄ‚îÄ‚ñ∂‚îÇ Proc.   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                   ‚îÇ
                   ‚ñº
            ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
            ‚îÇ   Item      ‚îÇ
            ‚îÇ (extracted) ‚îÇ
            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üìñ –î–µ—Ç–∞–ª—å–Ω—ã–π —Ä–∞–∑–±–æ—Ä –∫–æ–¥–∞

### 1. Data Processors

#### cleanText - –û—á–∏—Å—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞

```nim
proc cleanText(values: seq[string]): seq[string] =
  result = @[]
  for value in values:
    var cleaned = value
    cleaned = cleaned.strip()              # –£–±—Ä–∞—Ç—å –Ω–∞—á–∞–ª—å–Ω—ã–µ/–∫–æ–Ω–µ—á–Ω—ã–µ –ø—Ä–æ–±–µ–ª—ã
    cleaned = normalizeWhitespace(cleaned) # –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –ø—Ä–æ–±–µ–ª—ã
    if cleaned.len > 0:
      result.add cleaned
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```nim
loader.addCss("title", "a.title", inputProcessor = cleanText)
```

**–ü—Ä–∏–º–µ—Ä:**
```
Input:  "  Best   movie\n\n   ever!  "
Output: "Best movie ever!"
```

#### extractRating - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ä–µ–π—Ç–∏–Ω–≥–∞

```nim
proc extractRating(values: seq[string]): seq[string] =
  result = @[]
  for value in values:
    let pattern = re"(\d+)/10"
    var matches: array[1, string]
    if value.find(pattern, matches) != -1:
      result.add matches[0]  # –¢–æ–ª—å–∫–æ —á–∏—Å–ª–æ
    else:
      result.add ""
```

**–ü—Ä–∏–º–µ—Ä:**
```
Input:  "8/10"
Output: "8"
```

### 2. –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Å Selector API

```nim
proc extractReviewData(scraper: IMDBReviewsScraper, 
                      reviewElement: Selector): Item =
  result = initTable[string, JsonNode]()
  
  # –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å –¥–≤—É–º—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–º–∏ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞–º–∏
  var title = reviewElement.css("a.title").get()
  if title.len == 0:
    title = reviewElement.css(".review-summary").get()
  if title.len > 0:
    result["title"] = %title.strip()
  
  # –†–µ–π—Ç–∏–Ω–≥ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π —á–µ—Ä–µ–∑ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä
  let ratingElements = reviewElement.css(".rating-other-user-rating span")
  if not ratingElements.node.isNil:
    let ratingText = ratingElements.get()
    let ratingCleaned = extractRating(@[ratingText])
    if ratingCleaned.len > 0:
      result["rating"] = %ratingCleaned[0]
  
  # –¢–µ–∫—Å—Ç —Å –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–µ–π –ø—Ä–æ–±–µ–ª–æ–≤
  var reviewText = reviewElement.css(".text.show-more__control").get()
  if reviewText.len == 0:
    reviewText = reviewElement.css(".content .text").get()
  if reviewText.len > 0:
    result["review_text"] = %normalizeWhitespace(reviewText.strip())
  
  # URL —Å –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ–º –≤ –∞–±—Å–æ–ª—é—Ç–Ω—ã–π
  let authorUrl = reviewElement.css(".display-name-link").attrib("href")
  if authorUrl.len > 0:
    result["author_url"] = %urljoin(BASE_URL, authorUrl)
  
  # –ü—Ä—è–º–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π
  let hasSpoiler = not reviewElement.css(".spoiler-warning").node.isNil
  result["has_spoiler"] = %hasSpoiler
```

### 3. Pipeline —Ü–µ–ø–æ—á–∫–∞

```nim
# –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ pipelines
var shouldSave = true

# 1. Validation
shouldSave = scraper.validationPipeline.processItem(item)

if shouldSave:
  # 2. Deduplication
  shouldSave = scraper.duplicatesPipeline.processItem(item)

if shouldSave:
  # 3. Enrichment
  shouldSave = scraper.enrichmentPipeline.processItem(item)

if shouldSave:
  result.add item
```

**–õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã:**
- –ï—Å–ª–∏ –ª—é–±–æ–π pipeline –≤–µ—Ä–Ω—ë—Ç `false`, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è
- Item –Ω–µ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
- –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ (validation ‚Üí deduplication ‚Üí enrichment)

### 4. –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü

```nim
proc scrapeAllPages(scraper: IMDBReviewsScraper) {.async.} =
  var currentPage = 1
  var currentUrl = REVIEWS_URL
  
  while currentPage <= MAX_PAGES:
    # Middleware: request
    scraper.loggingMiddleware.processRequest(request, dummyResponse)
    
    # Fetch (async)
    let response = await fetchAsync(currentUrl)
    scraper.stats.requestsCount += 1
    
    # Middleware: response
    scraper.loggingMiddleware.processResponse(request, response)
    
    # Parse (async)
    let reviews = await scraper.scrapePage(response)
    scraper.allReviews.add reviews
    
    # Pagination
    currentUrl = getNextPageUrl(response)
    if currentUrl.len == 0:
      break
    
    currentPage += 1
    
    # Delay
    await sleepAsync(REQUEST_DELAY)
```

---

## üìä –í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

### 1. JSON (imdb_reviews.json)

```json
[
  {
    "review_id": "rw1234567",
    "title": "Best action movie of 2002!",
    "rating": "9",
    "review_text": "This movie is absolutely fantastic!...",
    "author": "JohnDoe",
    "author_url": "https://www.imdb.com/user/ur12345",
    "review_date": "15 January 2020",
    "helpful_count": "542 out of 678 found this helpful",
    "has_spoiler": false,
    "sentiment": "positive",
    "word_count": 42,
    "review_length": 245,
    "scraped_at": "2026-02-10T14:30:00"
  },
  ...
]
```

### 2. JSON Lines (imdb_reviews.jsonl)

```json
{"review_id":"rw1234567","title":"Best action movie!","rating":"9",...}
{"review_id":"rw2345678","title":"Good but not great","rating":"6",...}
{"review_id":"rw3456789","title":"Amazing thriller!","rating":"10",...}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ü–æ—Å—Ç—Ä–æ—á–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- –£–¥–æ–±–Ω–æ –¥–ª—è –±–æ–ª—å—à–∏—Ö –¥–∞—Ç–∞—Å–µ—Ç–æ–≤
- –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –∑–∞–ø–∏—Å–∏

### 3. CSV (imdb_reviews.csv)

```csv
review_id,title,rating,review_text,author,review_date,helpful_count,sentiment,word_count,scraped_at
"rw1234567","Best action movie!","9","This movie is...","JohnDoe","15 Jan 2020","542 out of 678","positive","42","2026-02-10T14:30:00"
"rw2345678","Good but not great","6","The movie has...","MovieCritic","22 Mar 2019","123 out of 234","neutral","28","2026-02-10T14:30:00"
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –ê–Ω–∞–ª–∏–∑ –≤ Excel/Google Sheets
- –ò–º–ø–æ—Ä—Ç –≤ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- –ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ

---

## üîÑ –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –ø—Ä–∏–º–µ—Ä–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π

```nim
# –í extractReviewData()

# –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
let commentsText = reviewElement.css(".comment-count").get()
if commentsText.len > 0:
  result["comments_count"] = %commentsText.strip()

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ verified purchase
let isVerified = not reviewElement.css(".verified-badge").node.isNil
result["is_verified"] = %isVerified

# –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
let images = reviewElement.css("img").getall()
var imageUrls: seq[string] = @[]
for img in images:
  let imgUrl = img.attrib("src")
  if imgUrl.len > 0:
    imageUrls.add urljoin(BASE_URL, imgUrl)
if imageUrls.len > 0:
  result["images"] = %imageUrls
```

### –ù–æ–≤—ã–π Pipeline

```nim
type
  FilterByRatingPipeline = ref object of Pipeline
    minRating: int

method processItem(p: FilterByRatingPipeline, item: var Item): bool =
  if item.hasKey("rating"):
    let rating = $(item["rating"])
    try:
      if parseInt(rating) < p.minRating:
        return false  # –û—Ç–±—Ä–æ—Å–∏—Ç—å –Ω–∏–∑–∫–∏–π —Ä–µ–π—Ç–∏–Ω–≥
    except:
      discard
  return true

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
let filterPipeline = FilterByRatingPipeline(minRating: 7)
shouldSave = filterPipeline.processItem(item)
```

### –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

```nim
proc analyzeReviews(reviews: seq[Item]) =
  # –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –¥–∞—Ç–∞–º
  var dateDistribution = initTable[string, int]()
  
  for review in reviews:
    if review.hasKey("review_date"):
      let date = $(review["review_date"])
      let year = date.split()[^1]  # –ü–æ—Å–ª–µ–¥–Ω–µ–µ —Å–ª–æ–≤–æ - –≥–æ–¥
      dateDistribution[year] = dateDistribution.getOrDefault(year, 0) + 1
  
  echo "Reviews by year:"
  for year, count in dateDistribution:
    echo "  ", year, ": ", count
```

### –≠–∫—Å–ø–æ—Ä—Ç –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö

```nim
import db_sqlite

proc saveToDatabase(reviews: seq[Item], dbPath: string) =
  let db = open(dbPath, "", "", "")
  
  db.exec(sql"""
    CREATE TABLE IF NOT EXISTS reviews (
      id TEXT PRIMARY KEY,
      title TEXT,
      rating INTEGER,
      review_text TEXT,
      author TEXT,
      review_date TEXT,
      sentiment TEXT,
      scraped_at DATETIME
    )
  """)
  
  for review in reviews:
    db.exec(sql"""
      INSERT OR REPLACE INTO reviews VALUES (?, ?, ?, ?, ?, ?, ?, ?)
    """,
      $(review["review_id"]),
      $(review["title"]),
      $(review["rating"]),
      $(review["review_text"]),
      $(review["author"]),
      $(review["review_date"]),
      $(review["sentiment"]),
      $(review["scraped_at"])
    )
  
  db.close()
```

### Retry –º–µ—Ö–∞–Ω–∏–∑–º

```nim
type
  RetryMiddleware = ref object of DownloaderMiddleware
    maxRetries: int
    retryDelay: int

proc fetchWithRetry(url: string, maxRetries: int): Future[Response] {.async.} =
  var attempts = 0
  
  while attempts < maxRetries:
    try:
      result = await fetchAsync(url)
      if result.status == 200:
        return result
    except:
      attempts += 1
      if attempts >= maxRetries:
        raise
      
      echo "Retry ", attempts, "/", maxRetries
      await sleepAsync(2000 * attempts)  # Exponential backoff
```

---

## üéì –û–±—É—á–∞—é—â–∏–µ –º–æ–º–µ–Ω—Ç—ã

### 2. –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

**–ë–µ–∑ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤:**
```nim
var item = newItem()
item["title"] = reviewElement.css("a.title").get().strip()
item["rating"] = reviewElement.css(".rating span").get().replace("/10", "")
# ... –º–Ω–æ–≥–æ –ø–æ–≤—Ç–æ—Ä—è—é—â–µ–≥–æ—Å—è –∫–æ–¥–∞
```

**–° –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö:**
```nim
# –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤ –≤—Ä—É—á–Ω—É—é
let ratingText = reviewElement.css(".rating span").get()
let ratingCleaned = extractRating(@[ratingText])
result["rating"] = %ratingCleaned[0]

# –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞
let text = reviewElement.css(".text").get()
result["text"] = %normalizeWhitespace(text.strip())

# –ß–∏—â–µ, –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ, —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ
```

### 2. –ó–∞—á–µ–º Pipelines?

**–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏:**
- ValidationPipeline ‚Äî —Ç–æ–ª—å–∫–æ –≤–∞–ª–∏–¥–∞—Ü–∏—è
- DuplicatesPipeline ‚Äî —Ç–æ–ª—å–∫–æ –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è
- EnrichmentPipeline ‚Äî —Ç–æ–ª—å–∫–æ –æ–±–æ–≥–∞—â–µ–Ω–∏–µ

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å/—É–±–∏—Ä–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ
- –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –¥—Ä—É–≥–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö

### 3. Mock –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```nim
proc createMockResponse(pageNum: int): Response =
  # –†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ HTML
  # –ü–æ–∑–≤–æ–ª—è–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
  # –í–∞–∂–Ω–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –æ—Ç–ª–∞–¥–∫–∏
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### –≠—Ç–∏–∫–∞ —Å–∫—Ä–µ–π–ø–∏–Ω–≥–∞

1. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ robots.txt**
   ```
   https://www.imdb.com/robots.txt
   ```

2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–∞–∑—É–º–Ω—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏**
   ```nim
   const REQUEST_DELAY = 2000  # 2 —Å–µ–∫—É–Ω–¥—ã
   ```

3. **–£–≤–∞–∂–∞–π—Ç–µ Terms of Service**

4. **–ò–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É–π—Ç–µ —Å–µ–±—è**
   ```nim
   userAgent: "MyBot/1.0 (contact@example.com)"
   ```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

```nim
proc safeScrape(url: string): Future[Response] {.async.} =
  try:
    result = await fetchAsync(url)
  except HttpRequestError:
    echo "Network error"
    result = nil
  except:
    echo "Unknown error: ", getCurrentExceptionMsg()
    result = nil
```

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [NimBrowser Documentation](./nimbrowser_documentation.md)
- [CSS Selectors Reference](https://www.w3.org/TR/css3-selectors/)
- [XPath Tutorial](https://www.w3schools.com/xml/xpath_intro.asp)
- [Nim Language](https://nim-lang.org/)

---

## ‚úÖ Checklist –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Å–∫—Ä–µ–π–ø–∏–Ω–≥–∞

- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å robots.txt
- [ ] –î–æ–±–∞–≤–∏—Ç—å User-Agent
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å retry –º–µ—Ö–∞–Ω–∏–∑–º
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–∞–ø—á–∏ (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è)
- [ ] –ü—Ä–æ–∫—Å–∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ (–¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è)
- [ ] –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ (resume capability)
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç—ã
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –Ω–µ–±–æ–ª—å—à–æ–º –¥–∞—Ç–∞—Å–µ—Ç–µ
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤

---

**–≠—Ç–æ—Ç –ø—Ä–∏–º–µ—Ä –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ –≤–µ–±-—Å–∫—Ä–µ–π–ø–∏–Ω–≥—É —Å NimBrowser!** üöÄ
